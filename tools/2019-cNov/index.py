from bs4 import BeautifulSoup
import requests
import time
import re
import os
from urllib.parse import urlparse, urlencode
import json

# # Request Url
# url = 'https://www.gov.uk/government/publications/coronavirus-covid-19-number-of-cases-in-england/coronavirus-covid-19-number-of-cases-in-england'

# # HTML content
# html_content = requests.get(url, "html.parser")

# # Beautifulsoup content
# bs4_content = BeautifulSoup(html_content.text, features="lxml")

# # Table Content
# table_content = bs4_content.findAll("tr")

# # Create city data obj
# Data_Obj = {}

# for i in table_content:
#     content = i.findAll('td')
#     tmp = []
#     for td in content:
#         tmp.append(td.text)
#     if(len(tmp)):
#         Data_Obj[tmp[0]] = {}
#         Data_Obj[tmp[0]] = tmp[1]


Data_Obj = {"Birmingham": " 852", "Hampshire": " 699", "Surrey": " 618", "Sheffield": " 602", "Hertfordshire": " 582", "Brent": " 559", "Kent": " 531", "Essex": " 517", "Southwark": " 516", "Cumbria": " 512", "Barnet": " 510", "Lambeth": " 508", "Lancashire": " 463", "Croydon": " 437", "Wandsworth": " 397", "Ealing": " 385", "Harrow": " 378", "Staffordshire": " 372", "Newham": " 370", "Bromley": " 366", "Lewisham": " 346", "Derbyshire": " 342", "Westminster": " 311", "Liverpool": " 309", "Nottinghamshire": " 298", "Waltham Forest": " 290", "Oxfordshire": " 277", "Hackney and City of London": " 266", "Enfield": " 264", "Tower Hamlets": " 259", "Newcastle upon Tyne": " 252", "Hillingdon": " 250", "Greenwich": " 247", "Merton": " 235", "Warwickshire": " 235", "Hounslow": " 234", "Walsall": " 231", "Camden": " 225", "Wolverhampton": " 222", "Worcestershire": " 221", "Northamptonshire": " 220", "Sandwell": " 215", "Redbridge": " 212", "Buckinghamshire": " 212", "Haringey": " 211", "Kensington and Chelsea": " 208", "Gloucestershire": " 208", "Norfolk": " 207", "Leeds": " 203", "Leicestershire": " 201", "Manchester": " 195", "Dudley": " 194", "Bexley": " 190", "Hammersmith and Fulham": " 188", "Islington": " 188", "Sutton": " 176", "West Sussex": " 172", "Derby": " 167", "Cambridgeshire": " 166", "County Durham": " 165", "North Yorkshire": " 163", "Salford": " 158", "Suffolk": " 157", "Coventry": " 155", "Richmond upon Thames": " 155", "Lincolnshire": " 153", "Devon": " 147", "Havering": " 142", "Solihull": " 141", "Barking and Dagenham": " 141", "Stockport": " 140", "Bristol, City of": " 137", "Barnsley": " 134", "Sunderland": " 131", "Rotherham": " 129", "Milton Keynes": " 127", "Kingston upon Thames": " 127", "Trafford": " 126", "Nottingham": " 125", "Oldham": " 125", "Northumberland": " 119",
            "Sefton": " 119", "Bradford": " 118", "Slough": " 117", "Luton": " 115", "Cornwall and Isles of Scilly": " 114", "Kirklees": " 114", "North Tyneside": " 113", "St. Helens": " 112", "Wirral": " 111", "Medway": " 110", "Leicester": " 107", "Shropshire": " 106", "Southampton": " 105", "Wiltshire": " 105", "Rochdale": " 105", "Cheshire East": " 102", "Central Bedfordshire": " 99", "Cheshire West and Chester": " 97", "Doncaster": " 95", "Wakefield": " 95", "Gateshead": " 95", "East Sussex": " 95", "Tameside": " 94", "South Gloucestershire": " 91", "Wigan": " 91", "Bury": " 87", "Portsmouth": " 83", "Thurrock": " 79", "Knowsley": " 79", "Windsor and Maidenhead": " 75", "Middlesbrough": " 74", "Dorset": " 73", "Bedford": " 72", "Southend-on-Sea": " 71", "Stockton-on-Tees": " 70", "Bolton": " 69", "Somerset": " 68", "Reading": " 67", "Wokingham": " 67", "West Berkshire": " 66", "Warrington": " 65", "Stoke-on-Trent": " 61", "Plymouth": " 60", "Calderdale": " 60", "Bournemouth, Christchurch and Poole": " 58", "East Riding of Yorkshire": " 56", "Redcar and Cleveland": " 55", "South Tyneside": " 53", "Bath and North East Somerset": " 52", "Telford and Wrekin": " 51", "North Somerset": " 50", "Brighton and Hove": " 50", "Torbay": " 49", "Herefordshire, County of": " 47", "Halton": " 41", "Swindon": " 40", "Blackburn with Darwen": " 37", "Peterborough": " 37", "York": " 36", "Bracknell Forest": " 36", "Darlington": " 30", "Blackpool": " 28", "North Lincolnshire": " 24", "North East Lincolnshire": " 23", "Kingston upon Hull, City of": " 18", "Hartlepool": " 17", "Isle of Wight": " 17", "Rutland": " 5", "London": " 9,291", "Midlands": " 4,694", "South East": " 3,392", "North East and Yorkshire": " 3,269", "North West": " 3,066", "East of England": " 2,233", "South West": " 1,254"}
unhandle_data = []

GeoJson = open('./ukgeo.json', 'r').read()
GeoJson = json.loads(GeoJson)

# data
bc_map_data = [
    ["gb-ay", 0],
    ["gb-3270", 0],
    ["gb-hi", 0],
    ["gb-ab", 0],
    ["gb-ps", 0],
    ["gb-wi", 0],
    ["gb-my", 0],
    ["gb-7398", 0],
    ["gb-eb", 0],
    ["gb-lc", 1],
    ["gb-2393", 2],
    ["gb-db", 4],
    ["gb-de", 0],
    ["gb-an", 0],
    ["gb-bl", 0],
    ["gb-ng", 2],
    ["gb-do", 13],
    ["gb-2458", 0],
    ["gb-er", 0],
    ["gb-ea", 0],
    ["gb-gg", 3],
    ["gb-ed", 0],
    ["gb-ic", 0],
    ["gb-2446", 0],
    ["gb-nn", 1],
    ["gb-rf", 0],
    ["gb-sa", 1],
    ["gb-sl", 1],
    ["gb-wd", 0],
    ["gb-ar", 1],
    ["gb-as", 4],
    ["gb-fk", 2],
    ["gb-zg", 0],
    ["gb-cc", 0],
    ["gb-du", 1],
    ["gb-fi", 2],
    ["gb-ml", 0],
    ["gb-wh", 3],
    ["gb-bo", 0],
    ["gb-dh", 1],
    ["gb-da", 0],
    ["gb-hp", 0],
    ["gb-mb", 0],
    ["gb-rc", 0],
    ["gb-zt", 0],
    ["gb-ha", 10],
    ["gb-zh", 0],
    ["gb-2318", 0],
    ["gb-gc", 3],
    ["gb-mk", 1],
    ["gb-bu", 2],
    ["gb-bn", 0],
    ["gb-bs", 2],
    ["gb-ns", 1],
    ["gb-sj", 0],
    ["gb-2389", 2],
    ["gb-ds", 0],
    ["gb-2391", 0],
    ["gb-ht", 16],
    ["gb-cm", 1],
    ["gb-kh", 1],
    ["gb-ne", 0],
    ["gb-ba", 1],
    ["gb-xb", 0],
    ["gb-ke", 5],
    ["gb-bz", 2],
    ["gb-be", 3],
    ["gb-cn", 5],
    ["gb-eg", 5],
    ["gb-ef", 1],
    ["gb-gr", 1],
    ["gb-hf", 2],
    ["gb-hu", 5],
    ["gb-it", 0],
    ["gb-kc", 13],
    ["gb-cy", 1],
    ["gb-me", 1],
    ["gb-rb", 1],
    ["gb-ru", 1],
    ["gb-su", 2],
    ["gb-th", 4],
    ["gb-wf", 1],
    ["gb-ww", 3],
    ["gb-we", 4],
    ["gb-li", 1],
    ["gb-bf", 3],
    ["gb-ld", 0],
    ["gb-nm", 0],
    ["gb-am", 0],
    ["gb-bb", 0],
    ["gb-cr", 0],
    ["gb-dn", 0],
    ["gb-2347", 0],
    ["gb-lb", 0],
    ["gb-mf", 0],
    ["gb-om", 0],
    ["gb-lr", 0],
    ["gb-cf", 0],
    ["gb-nw", 0],
    ["gb-2354", 0],
    ["gb-dw", 0],
    ["gb-cl", 0],
    ["gb-by", 0],
    ["gb-cs", 0],
    ["gb-pe", 0],
    ["gb-2301", 0],
    ["gb-gd", 0],
    ["gb-sp", 1],
    ["gb-po", 0],
    ["gb-mt", 0],
    ["gb-bj", 0],
    ["gb-cp", 0],
    ["gb-rt", 0],
    ["gb-ca", 2],
    ["gb-vg", 0],
    ["gb-np", 0],
    ["gb-sw", 1],
    ["gb-7122", 3],
    ["gb-bw", 0],
    ["gb-la", 4],
    ["gb-ey", 0],
    ["gb-yk", 3],
    ["gb-di", 0],
    ["gb-fl", 0],
    ["gb-wx", 0],
    ["gb-bg", 0],
    ["gb-no", 0],
    ["gb-tf", 0],
    ["gb-lm", 0],
    ["gb-sb", 0],
    ["gb-fe", 0],
    ["gb-ny", 0],
    ["gb-2420", 0],
    ["gb-tb", 7],
    ["gb-ex", 5],
    ["gb-nf", 0],
    ["gb-bh", 8],
    ["gb-hv", 2],
    ["gb-tr", 0],
    ["gb-ss", 1],
    ["gb-ws", 3],
    ["gb-wr", 4],
    ["gb-hd", 1],
    ["gb-kt", 2],
    ["gb-sr", 6],
    ["gb-es", 0],
    ["gb-ox", 7],
    ["gb-sn", 2],
    ["gb-na", 4],
    ["gb-rl", 0],
    ["gb-hk", 2],
    ["gb-hy", 1],
    ["gb-hr", 1],
    ["gb-lt", 4],
    ["gb-lw", 3],
    ["gb-nh", 0],
    ["gb-sq", 8],
    ["gb-he", 1],
    ["gb-st", 4],
    ["gb-wc", 0],
    ["gb-tk", 0],
    ["gb-6338", 3],
    ["gb-nb", 0],
    ["gb-2367", 4],
    ["gb-7113", 1],
    ["gb-7114", 0],
    ["gb-7115", 1],
    ["gb-7116", 0],
    ["gb-2364", 0],
    ["gb-7118", 0],
    ["gb-7119", 5],
    ["gb-wt", 0],
    ["gb-ms", 5],
    ["gb-7117", 0],
    ["gb-3265", 0],
    ["gb-7130", 0],
    ["gb-7131", 1],
    ["gb-7132", 5],
    ["gb-7133", 0],
    ["gb-3266", 0],
    ["gb-7121", 3],
    ["gb-7123", 3],
    ["gb-7124", 0],
    ["gb-7125", 4],
    ["gb-7126", 1],
    ["gb-7127", 1],
    ["gb-7128", 5],
    ["gb-7129", 4],
    ["gb-2366", 0],
    ["gb-nt", 5],
    ["gb-3267", 1],
    ["gb-7134", 0],
    ["gb-7135", 2],
    ["gb-nl", 0],
    ["gb-7136", 0],
    ["gb-2377", 2],
    ["gb-7137", 0],
    ["gb-7138", 1],
    ["gb-7139", 3],
    ["gb-7140", 0],
    ["gb-7141", 0],
    ["gb-7142", 3],
    ["gb-2381", 0],
    ["gb-bd", 0],
    ["gb-2388", 1],
    ["gb-7143", 0],
    ["gb-7144", 3],
    ["gb-7145", 2],
    ["gb-7146", 1],
    ["gb-7147", 1],
    ["gb-7149", 8],
    ["gb-so", 0],
    ["gb-7150", 0],
    ["gb-7151", 0],
    ["gb-pb", 1],
    ["gb-iw", 1],
    ["gb-mo", 0],
    ["gb-ag", 0],
    ["gb-el", 0],
    ["gb-sm", 2],
    ["gb-ci", 0],
    ["gb-hl", 5],
    ["gb-co", 4],
    ["gb-cw", 0],
    ["gb-nd", 0],
    ["gb-dg", 0],
    ["gb-cu", 7],
    ["gb-sf", 1],
    ["gb-mw", 2],
    ["gb-lu", 2],
    ["gb-wl", 4],
    ["gb-3271", 0]
]
map_data = [
    ["gb-ay", 0],
    ["gb-3270", 0],
    ["gb-hi", 0],
    ["gb-ab", 0],
    ["gb-ps", 0],
    ["gb-wi", 0],
    ["gb-my", 0],
    ["gb-7398", 0],
    ["gb-eb", 0],
    ["gb-lc", 1],
    ["gb-2393", 2],
    ["gb-db", 4],
    ["gb-de", 0],
    ["gb-an", 0],
    ["gb-bl", 0],
    ["gb-ng", 2],
    ["gb-do", 13],
    ["gb-2458", 0],
    ["gb-er", 0],
    ["gb-ea", 0],
    ["gb-gg", 3],
    ["gb-ed", 0],
    ["gb-ic", 0],
    ["gb-2446", 0],
    ["gb-nn", 1],
    ["gb-rf", 0],
    ["gb-sa", 1],
    ["gb-sl", 1],
    ["gb-wd", 0],
    ["gb-ar", 1],
    ["gb-as", 4],
    ["gb-fk", 2],
    ["gb-zg", 0],
    ["gb-cc", 0],
    ["gb-du", 1],
    ["gb-fi", 2],
    ["gb-ml", 0],
    ["gb-wh", 3],
    ["gb-bo", 0],
    ["gb-dh", 1],
    ["gb-da", 0],
    ["gb-hp", 0],
    ["gb-mb", 0],
    ["gb-rc", 0],
    ["gb-zt", 0],
    ["gb-ha", 10],
    ["gb-zh", 0],
    ["gb-2318", 0],
    ["gb-gc", 3],
    ["gb-mk", 1],
    ["gb-bu", 2],
    ["gb-bn", 0],
    ["gb-bs", 2],
    ["gb-ns", 1],
    ["gb-sj", 0],
    ["gb-2389", 2],
    ["gb-ds", 0],
    ["gb-2391", 0],
    ["gb-ht", 16],
    ["gb-cm", 1],
    ["gb-kh", 1],
    ["gb-ne", 0],
    ["gb-ba", 1],
    ["gb-xb", 0],
    ["gb-ke", 5],
    ["gb-bz", 2],
    ["gb-be", 3],
    ["gb-cn", 5],
    ["gb-eg", 5],
    ["gb-ef", 1],
    ["gb-gr", 1],
    ["gb-hf", 2],
    ["gb-hu", 5],
    ["gb-it", 0],
    ["gb-kc", 13],
    ["gb-cy", 1],
    ["gb-me", 1],
    ["gb-rb", 1],
    ["gb-ru", 1],
    ["gb-su", 2],
    ["gb-th", 4],
    ["gb-wf", 1],
    ["gb-ww", 3],
    ["gb-we", 4],
    ["gb-li", 1],
    ["gb-bf", 3],
    ["gb-ld", 0],
    ["gb-nm", 0],
    ["gb-am", 0],
    ["gb-bb", 0],
    ["gb-cr", 0],
    ["gb-dn", 0],
    ["gb-2347", 0],
    ["gb-lb", 0],
    ["gb-mf", 0],
    ["gb-om", 0],
    ["gb-lr", 0],
    ["gb-cf", 0],
    ["gb-nw", 0],
    ["gb-2354", 0],
    ["gb-dw", 0],
    ["gb-cl", 0],
    ["gb-by", 0],
    ["gb-cs", 0],
    ["gb-pe", 0],
    ["gb-2301", 0],
    ["gb-gd", 0],
    ["gb-sp", 1],
    ["gb-po", 0],
    ["gb-mt", 0],
    ["gb-bj", 0],
    ["gb-cp", 0],
    ["gb-rt", 0],
    ["gb-ca", 2],
    ["gb-vg", 0],
    ["gb-np", 0],
    ["gb-sw", 1],
    ["gb-7122", 3],
    ["gb-bw", 0],
    ["gb-la", 4],
    ["gb-ey", 0],
    ["gb-yk", 3],
    ["gb-di", 0],
    ["gb-fl", 0],
    ["gb-wx", 0],
    ["gb-bg", 0],
    ["gb-no", 0],
    ["gb-tf", 0],
    ["gb-lm", 0],
    ["gb-sb", 0],
    ["gb-fe", 0],
    ["gb-ny", 0],
    ["gb-2420", 0],
    ["gb-tb", 7],
    ["gb-ex", 5],
    ["gb-nf", 0],
    ["gb-bh", 8],
    ["gb-hv", 2],
    ["gb-tr", 0],
    ["gb-ss", 1],
    ["gb-ws", 3],
    ["gb-wr", 4],
    ["gb-hd", 1],
    ["gb-kt", 2],
    ["gb-sr", 6],
    ["gb-es", 0],
    ["gb-ox", 7],
    ["gb-sn", 2],
    ["gb-na", 4],
    ["gb-rl", 0],
    ["gb-hk", 2],
    ["gb-hy", 1],
    ["gb-hr", 1],
    ["gb-lt", 4],
    ["gb-lw", 3],
    ["gb-nh", 0],
    ["gb-sq", 8],
    ["gb-he", 1],
    ["gb-st", 4],
    ["gb-wc", 0],
    ["gb-tk", 0],
    ["gb-6338", 3],
    ["gb-nb", 0],
    ["gb-2367", 4],
    ["gb-7113", 1],
    ["gb-7114", 0],
    ["gb-7115", 1],
    ["gb-7116", 0],
    ["gb-2364", 0],
    ["gb-7118", 0],
    ["gb-7119", 5],
    ["gb-wt", 0],
    ["gb-ms", 5],
    ["gb-7117", 0],
    ["gb-3265", 0],
    ["gb-7130", 0],
    ["gb-7131", 1],
    ["gb-7132", 5],
    ["gb-7133", 0],
    ["gb-3266", 0],
    ["gb-7121", 3],
    ["gb-7123", 3],
    ["gb-7124", 0],
    ["gb-7125", 4],
    ["gb-7126", 1],
    ["gb-7127", 1],
    ["gb-7128", 5],
    ["gb-7129", 4],
    ["gb-2366", 0],
    ["gb-nt", 5],
    ["gb-3267", 1],
    ["gb-7134", 0],
    ["gb-7135", 2],
    ["gb-nl", 0],
    ["gb-7136", 0],
    ["gb-2377", 2],
    ["gb-7137", 0],
    ["gb-7138", 1],
    ["gb-7139", 3],
    ["gb-7140", 0],
    ["gb-7141", 0],
    ["gb-7142", 3],
    ["gb-2381", 0],
    ["gb-bd", 0],
    ["gb-2388", 1],
    ["gb-7143", 0],
    ["gb-7144", 3],
    ["gb-7145", 2],
    ["gb-7146", 1],
    ["gb-7147", 1],
    ["gb-7149", 8],
    ["gb-so", 0],
    ["gb-7150", 0],
    ["gb-7151", 0],
    ["gb-pb", 1],
    ["gb-iw", 1],
    ["gb-mo", 0],
    ["gb-ag", 0],
    ["gb-el", 0],
    ["gb-sm", 2],
    ["gb-ci", 0],
    ["gb-hl", 5],
    ["gb-co", 4],
    ["gb-cw", 0],
    ["gb-nd", 0],
    ["gb-dg", 0],
    ["gb-cu", 7],
    ["gb-sf", 1],
    ["gb-mw", 2],
    ["gb-lu", 2],
    ["gb-wl", 4],
    ["gb-3271", 0]
]
for i in Data_Obj:
    if GeoJson.__contains__(i):
        # hc-key
        hc_key = GeoJson[i]['hc-key']
        # print(hc_key)
        for j in range(len(map_data)):
            if map_data[j][0] == hc_key:
                map_data[j][1] = int(Data_Obj[i])

    else:
        unhandle_data.append(i)

# for k in range(len(map_data)):
#     if map_data[k] != bc_map_data[k]:
#         print('old: ', bc_map_data[k])
#         print('new: ', map_data[k])
print(map_data)
print(unhandle_data)
# print(Data_Obj)
